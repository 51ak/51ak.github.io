<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Mysql的优化方法</title>
<link href="../../img/main.css" rel="stylesheet" type="text/css" />
<script src="../../img/daohang.js" type="text/javascript"></script>
<meta name="description" content="一、在编译时优化mysql<br/>如果你从源代码分发安装mysql，要注意，编译过程对以后的目标程序性能有重要的影响，不同的编译方式可能得到类似的目标文件，但性能可能相差很大，因此，在编译安装mysql适应仔细根据你的应用类型选择最可能好的编译选项。这种定制的mysql可以为你的应用提供最佳性能。<br/>技巧：选用较好的编译器和较好的编译器选项，这样应用可提高性能10-30%。（myMysql的优化方法" />

</head>

<body>

<div id="container">
  <div id="header">
<div class="dh-logo cls"> <div class="dh-logo-logo" ><a href="#"><img src="../../img/logo.gif" alt="数据库管理员DBA学习网站  LOGO"  width="251" height="58" /></a></div><div class="dh-logo-ac" id="topbar"><div class="dh-logo-nav">    <span class="f_black">Tips</span>： 亲爱的<span class="f_333" title="注：网站的访客">GUEST</span>用户，系统已为你<span class="f_333" title="注：不解释">GRANT</span>了<span class="f_333" title="注：可以查看网站上的所有文章">SELECT</span>,<a href="/add.aspx" title="注：可以发表文章" rel="nofollow">INSERT</a> 权限 </div> </div></div>
<div id="topMain"><div id="top"><ul class="nav"><li><a href="../../index.htm">网站首页</a></li><li><a  href="../sqlserver/l_1_1.htm" title="SQLServer">SQLServer</a></li><li><a  href="../Oracle/l_7_1.htm" title="Oracle">Oracle</a></li><li><a href="../mysql/l_13_1.htm" class="hover"　title="MySQL">MySQL</a></li><li><a  href="../othersql/l_19_1.htm" title="其他数据库">其他数据库</a></li><li><a  href="../yunwei/l_26_1.htm" title="系统运维">系统运维</a></li><li><a  href="../kaoshi/l_34_1.htm" title="DBA考试">DBA考试</a></li><li><a  href="../dbahuati/l_39_1.htm" title="DBA话题">DBA话题</a></li></ul><ul class="sub"><li><a  href="../mysqlzhishi/l_14_1.htm" title="MySQL基础知识"><span class="zc_666">基础知识</span></a>|</li><li><a  href="../mysqlha/l_15_1.htm" title="MySQL高可用性和HA">高可用性和HA</a>|</li><li><a  href="../mysqlyouhua/l_16_1.htm" title="MySQL性能与优化">性能与优化</a>|</li><li><a  href="../mysqlguzhang/l_17_1.htm" title="MySQL故障与解决">故障与解决</a>|</li><li><a  href="../mysqlyuanma/l_18_1.htm" title="MySQL源码解读">源码解读</a>|</li></ul></div></div>
<br class="clearfloat" />

  </div>
    <div class="local_daohang">您现在的位置: <a href="../../">首页</a> &nbsp;&gt;&nbsp;<a href="../mysql/l_13_1.htm">MySQL</a>&nbsp;&gt;&nbsp;<a href="../mysqlzhishi/l_14_1.htm">基础知识</a></div>
  <div id="sidebar1">

  
  <div class='div_tab_tab'>
	<div id="div_login_title">通行证登录</div>
          <div id="div_login"> <iframe src="../../page/login.html" frameBorder="0" width="100%"  scrolling="no" height="190"></iframe>  
              &nbsp;</div>     
  </div>
    
  
   <div  class='div_tab_tab'>
  <div id="div_ran" > <span>【在线问答】</span><br /><a href="#" >[{类型}] {题干，这里会显示问题的标题}<br />点击进入答题>></a>
	</div>
  </div>
  
     

    <!-- end #sidebar1 --></div>
  <div id="mainContent">
  		
          
                        <div id="contentdiv">                            
                     <div id="atTitle"><h1>Mysql的优化方法</h1></div>
					<div id="atSource"> 作者：[网上资料 ] </div>
					
                    <div id="viewcontent">
                   　　一、在编译时优化<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a><br />如果你从源代码分发安装<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>，要注意，编译过程对以后的目标程序性能有重要的影响，不同的编译方式可能得到类似的目标文件，但性能可能相差很大，因此，在编译安装<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>适应仔细根据你的应用类型选择最可能好的编译选项。这种定制的<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>可以为你的应用提供最佳性能。　<br />技巧：选用较好的编译器和较好的编译器选项，这样应用可提高性能10-30%。（<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>文档如是说）　<br />1.1、使用pgcc（pentium　gcc)编译器<br />该编译器针对运行在奔腾处理器系统上的程序进行优化，用pgcc编译<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>源代码，总体性能可提高10%。当然如果你的服务器不是用奔腾处理器，就不必用它了，因为它是专为奔腾系统设计的。　<br />1.2、仅使用你想使用的字符集编译<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a><br /><a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>目前提供多达24种不同的字符集，为全球用户以他们自己的语言插入或查看表中的数据。却省情况下，<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>安装所有者这些字符集，热然而，最好的选择是指选择一种你需要的。如，禁止除latin1字符集以外的所有其它字符集：　<br />------------------------------------------------------------------------------　<br />%&gt;./configure　-with-extra-charsets=none　[--other-configuration-options]　<br />------------------------------------------------------------------------------　<br />1.3、将<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>d编译成静态执行文件<br />将<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>d编译成静态执行文件而无需共享库也能获得更好的性能。通过在配置时指定下列选项，可静态编译<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>d。　<br />------------------------------------------------------------------------------　<br />%&gt;./configure　-with-<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>d-ldflags=-all-static　[--other-configuration-options]　<br />------------------------------------------------------------------------------　<br />1.4、配置样本<br />下列配置命令常用于提高性能：　<br />------------------------------------------------------------------------------　<br />%&gt;cflags="-o6　-mpentiumpro　-fomit-frame-pointer"　cxx=gcc　cxxflags="-o6　-mpentiumpro　-fomit-frame-pointer　-felide-constructors　-fno-exceptions　-fno-rtti"　./configure　--prefix=/usr/local　--enable-assembler　--with-<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>d-ldflags=-all-static　--disable-shared　<br />------------------------------------------------------------------------------　<br />　　二、调整服务器<br />确保运用正确的编译固然重要，但这只是成功的第一步，配置众多的<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>变量同样对服务器的正常运行起关键作用。你可以将这些变量的赋值存在一个配置文件中，以确保它们在每次启动<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>时均起作用，这个配置文件就是my.cnf文件。<br /><a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>已经提供了几个my.cnf文件的样本，可在/usr/local/<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>d/share/<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>/目录下找到。这些文件分别命名为my-small.cnf、　my-medium.cnf、my-large.cnf和my-huge.cnf，规模说明可在描述配置文件适用的系统类型标题中找到。如果在只有相当少内存的系统上运行<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>，而且只是偶尔的用一下，那么my-small.cnf会比较理想，因为它命令<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>d只使用最少的资源。类似地，如果你计划构建电子商务超市，而且系统拥有2g内存，那么你可能要用到<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>-huge.cnf文件了。为了利用这些文件中的一个，你需要复制一个最适合需求的文件，改名为my.cnf。你可以选择使用配置文件三种作用范围的一种：<br />global：将my.cnf文件复制到服务器的/etc目录下，这使得配置文件中的变量作用于全局，即对所有服务器上的<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>数据库服务器有效。<br />local：将my.cnf文件复制到[<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>-install-dir]/var/目录下，使得my.cnf作用于特定的服务器。[<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>-install-dir]表示<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>安装目录。<br />user：你可以再限制作用于特定的用户，将my.cnf复制到用户的根目录下。<br />究竟如何设置my.cnf中的这些变量呢？更进一步说，你可以设置哪一个变量。虽然所用变量对<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>服务器相对通用，每一个变量与<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>的的某些组件有更特定的关系。如变量max_connects归在<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>d类别下。执行下列命令即可知道：　<br />------------------------------------------------------------------<br />%&gt;/usr/local/<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>/libexec/<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>d　--help　<br />------------------------------------------------------------------　<br />它显示大量的选项及与<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>d相关的变量。你可以很容易地在该行文字之下找出变量：　<br />-------------------------------------------------------------------　<br />possible　variables　for　option　--set-variable　(-o)　are　<br />-------------------------------------------------------------------　<br />然后你可以如下设置my.cnf中的那些变量：　<br />-------------------------------------------------------------------　<br />set-variable　=　max_connections=100　<br />-------------------------------------------------------------------　<br />它设置<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>服务器的最大并发连接数为100。要确保在my.cnf文件中的[<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>d]标题下插入变量设置。<br />　<br />　　三、表类型<br />很多<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>用户可能很惊讶，<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>确实为用户提供5种不同的表类型，称为dbd、heap、isam、merge和myiasm。dbd归为事务安全类，而<a href="../../html/sqlsql/l_25_1.htm" title="其他" >其他</a>为非事务安全类。　<br />3.1、事务安全　<br />dbd　<br />berkeley　db(dbd)表是支持事务处理的表，由sleepycat软件公司开发。它提供<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>用户期待已久的功能-事务控制。事务控制在任何数据库系统中都是一个极有价值的功能，因为它们确保一组命令能成功地执行。　<br />3.2、非事务安全　<br />heap　<br />heap表是<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>中存取数据最快的表。这是因为他们使用存储在动态内存中的一个哈希索引。另一个要点是如果<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>或服务器崩溃，数据将丢失。　<br />isam　<br />isam表是早期<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>版本的缺省表类型，直到myiasm开发出来。建议不要再使用它。　<br />merge　<br />merge是一个有趣的新类型，在3.23.25之后出现。一个merge表实际上是一个相同myisam表的集合，合并成一个表，主要是为了效率原因。这样可以提高速度、搜索效率、修复效率并节省磁盘空间。　<br />myiasm　<br />这是<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>的缺省表类型。它基于iasm代码，但有很多有用的扩展。myiasm比较好的原因：　<br />myiasm表小于iasm表，所以使用较少资源。　<br />myiasm表在不同的平台上二进制层可移植。　<br />更大的键码尺寸，更大的键码上限。　<br />3.3、指定表类型<br />你可在创建表时指定表的类型。下例创建一个heap表：　<br />--------------------------------------------------------------------<br /><a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>&gt;create　table　email_addresses　type=heap　(　<br />-&gt;email　char(55)　not　null,　<br />-&gt;name　char(30)　not　null,　<br />-&gt;primary　key(email)　);　<br />---------------------------------------------------------------------<br />bdb表需要一些配置工作。　<br />3.4、更多的表类型<br />为了使<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>管理工作更有趣，即将发布的<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>　4.0将提供两种新的表类型，称为innobase和gemeni。　<br />　　四、优化工具<br /><a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>服务器本身提供了几条内置命令用于帮助优化。　<br />4.1、show　<br />你可能有兴趣知道<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>服务器究竟更了什么，下列命令给出一个总结：　<br />-----------------------------------<br /><a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>&gt;show　status;　<br />-----------------------------------<br />它给出了一个相当长的状态变量及其值的列表。有些变量包含了异常终止客户的数量、异常终止连接的数量、连接尝试的次数、最大并发连接数和大量<a href="../../html/sqlsql/l_25_1.htm" title="其他" >其他</a>有用的信息。这些信息对找出系统问题和低效极具价值。　<br />show还能做更多的事情。它可以显示关于日志文件、特定数据库、表、索引、进程和权限表中有价值的信息。详见<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>手册。　<br />4.2、explain　<br />当你面对select语句时，explain解释select命令如何被处理。这不仅对决定是否应该增加一个索引，而且对决定一个复杂的join如何被<a href="../../html/mysql/l_13_1.htm" title="mysql" >mysql</a>处理都是有帮助的。　<br />4.3、optimize　<br />optimize语句允许你恢复空间和合并数据文件碎片，对包含变长行的表进行了大量更新和删除后，这样做特别重要。optimize目前只工作于myiasm和bdb表。<br />
																	|
</div>  
 
                    </div>
                    <hr class="hrdt" />	
<div id="res"></div>
                        
                        </div>

<!-- end #mainContent --></div>
	<!-- 这个用于清除浮动的元素应当紧跟 #mainContent div 之后，以便强制 #container div 包含所有的子浮动 -->
	<br class="clearfloat" />

      
   
	<div id="footer">
  <ul class="green_1">		<li><div id="slogo"></div></li>		<li><div id="bline"></div></li>		<li><div id="binfo">网站名称：数据库DBA学习网站 www.580top.com<br />网络维护：51ak(微信:sohu91) <br /></div></li>	</ul>
   <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"K2Iiv8isAYH4TLPh",ck:"K2Iiv8isAYH4TLPh"})</script>
  <!-- end #footer --></div>
  <!-- end #footer --></div>
<!-- end #container --></div>
</body>
</html>
